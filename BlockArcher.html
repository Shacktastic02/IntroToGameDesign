<!DOCTYPE html>
<html>
    <head>
        <title>Block Archer</title>
        <style>
            *{
                margin: 0px;
                overflow: hidden;
            }
        </style>
    </head>

    <body>
        <canvas id="canv"></canvas>

        <script src="engine/Scene.js"></script>
        <script src="engine/Time.js"></script>
        <script src="engine/Input.js"></script>
        <script src="engine/GameObject.js"></script>
        <script src="engine/Engine.js"></script>
        <script src="engine/Component.js"></script>
        <script src="engine/Collisions.js"></script>
        <script src="engine/Globals.js"></script>

        <script src="engine/components/Rectangle.js"></script>
        <script src="engine/components/Transform.js"></script>
        <script src="engine/components/WASDMovement.js"></script>
        <script src="engine/components/Circle.js"></script>

        <script src="games/objects/Ally.js"></script>
        <script src="games/objects/Enemy.js"></script>
        <script src="games/objects/Player.js"></script>
        <script src="games/objects/Projectile.js"></script>

        <script src="games/scenes/Level.js"></script>
        <script src="games/scenes/Loss.js"></script>
        <script src="games/scenes/Menu.js"></script>
        <script src="games/scenes/Victory.js"></script>

        <script src="games/components/NPCMovement.js"></script>
        <script src="games/components/LevelController.js"></script>
        <script src="games/components/NumCollisions.js"></script>

        <script>
///////////////////////////////////////////////GLOBALS/////////////////////////////////////////////////////////////////
           
           let canvas
           let ctx
//////////////////////////////////////////////FUNCTIONS////////////////////////////////////////////////////////////////

            //game loop
            function tick(){
                if(Engine.nextScene){
                    Engine.curScene = Engine.nextScene
                    Engine.nextScene = null
                    Engine.curScene.start()
                }
                Engine.currScene.update()
                Engine.currScene.draw()
            }

            function setup(){
                window.addEventListener("keydown", Input.keydown)
                window.addEventListener("keyup", Input.keyup)
               // window.addEventListener("click", Input.clickHandler)

                canvas = document.getElementById("canv")
                ctx = canvas.getContext("2d")
            }

//////////////////////////////////////////////////CALLS////////////////////////////////////////////////////////////////          
            
            setup()
            Engine.currScene = new Level()
            Engine.currScene.start()
            setInterval(tick, Time.msBtwFrames)
            
        </script>
    </body>
</html>
